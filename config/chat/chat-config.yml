apiVersion: v1
kind: ConfigMap
metadata:
  name: openim-chat-config
data:
  discovery.yml: |
    enable: kubernetes
    kubernetes:
      namespace: default
    etcd:
      rootDirectory: openim
      address: [ localhost:12379 ]
      username: ''
      password: ''

    rpcService:
      user: user-rpc-service
      friend: friend-rpc-service
      msg: msg-rpc-service
      push: push-rpc-service
      messageGateway: messagegateway-rpc-service
      group: group-rpc-service
      auth: auth-rpc-service
      conversation: conversation-rpc-service
      third: third-rpc-service
      chat: chat-rpc-service
      admin: admin-rpc-service

  log.yml: |
    # Log storage path, default is acceptable, change to a full path if modification is needed
    # storageLocation: ../../../../logs/
    storageLocation: ./logs/
    # Log rotation period (in hours), default is acceptable
    rotationTime: 24
    # Number of log files to retain, default is acceptable
    remainRotationCount: 2
    # Log level settings: 3 for production environment; 6 for more verbose logging in debugging environments
    remainLogLevel: 6
    # Whether to output to standard output, default is acceptable
    isStdout: true
    # Whether to log in JSON format, default is acceptable
    isJson: false
    # output simplify log when KeyAndValues's value len is bigger than 50 in rpc method log
    isSimplify: true

  mongodb.yml: |
    uri: "mongodb://minio_pC5wMB:rI57PJsJhnz_qlRkfnTa0RPT@47.237.103.4:27017/openim_v3?authSource=admin&directConnection=true"
    address: []
    database: openim_v3
    username:
    password:
    authSource:
    mongoMode: "standalone"
    maxPoolSize: 100
    maxRetry: 10

  redis.yml: |
    address: [ "47.237.103.4:6379" ]
    username:
    password: 'rI57PJsJhnz_qlRkfnTa0RPT'  # openIM123
    clusterMode: false
    db: 0
    maxRetry: 10
    poolSize: 100

  share.yml: |
    openIM:
      # OpenIM API address
      apiURL: http://openim-api-service:10002
      # OpenIM secret key, must be consistent with OpenIM
      secret: openIM123
      # OpenIM administrator userID, must be consistent with OpenIM
      adminUserID: imAdmin

    chatAdmin:
       # Default username and password for the admin
      - "chatAdmin"

  chat-api-admin.yml: |
    api:
      # Listening IP; 0.0.0.0 means both internal and external IPs are listened to, default is recommended
      listenIP: 0.0.0.0
      # Listening ports; if multiple are configured, multiple instances will be launched
      ports: [ 10009 ]

  chat-rpc-admin.yml: |
    rpc:
      # The IP address where this RPC service registers itself; if left blank, it defaults to the internal network IP
      registerIP: ''
      # IP address that the RPC service listens on; setting to 0.0.0.0 listens on both internal and external IPs. If left blank, it automatically uses the internal network IP
      listenIP: 0.0.0.0
      # List of ports that the RPC service listens on; configuring multiple ports will launch multiple instances.
      ports: [ 30200 ]

    tokenPolicy:
      expire: 90

    secret: chat123
  chat-api-chat.yml: |
    api:
      # Listening IP; 0.0.0.0 means both internal and external IPs are listened to, default is recommended
      listenIP: 0.0.0.0
      # Listening ports; if multiple are configured, multiple instances will be launched
      ports: [ 10008 ]

  chat-rpc-chat.yml: |
    rpc:
      # The IP address where this RPC service registers itself; if left blank, it defaults to the internal network IP
      registerIP: ''
      # IP address that the RPC service listens on; setting to 0.0.0.0 listens on both internal and external IPs. If left blank, it automatically uses the internal network IP
      listenIP: 0.0.0.0
      # List of ports that the RPC service listens on; configuring multiple ports will launch multiple instances.
      ports: [ 30300 ]

    verifyCode:
      validTime: 300
      validCount: 5
      uintTime: 86400
      maxCount: 10
      superCode: "666666"
      len: 6
      phone:
        use: ""
        ali:
          endpoint: ""
          accessKeyId: ""
          accessKeySecret: ""
          signName: ""
          verificationCodeTemplateCode: ""
      mail:
        enable: false
        title: ""
        senderMail: ""
        senderAuthorizationCode: ""
        smtpAddr: ""
        smtpPort:

    liveKit:
      url: "ws://127.0.0.1:7880" # LIVEKIT_URL, LiveKit server address and port
      key: "APIGPW3gnFTzqHH"
      secret: "23ztfSqsfQ8hKkHzHTl3Z4bvaxro0snjk5jwbp5p6Q3"

    allowRegister: true
